---
title: 限制和配置 | Microsoft Docs
description: 限制和配置
services: ''
suite: flow
documentationcenter: na
author: stepsic-microsoft-com
manager: anneta
editor: ''
tags: ''
ms.service: flow
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 01/31/2018
ms.author: stepsic
ms.openlocfilehash: 06e327963a44f74141492ec14f2bef7cab802b79
ms.sourcegitcommit: 12fbfe22fedd780d42ef1d2febfd7a0769b4902e
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/26/2018
---
# <a name="limits-and-configuration-in-microsoft-flow"></a>Microsoft Flow 中的限制和配置
本主题介绍流的当前限制和配置详细信息。

## <a name="request-limits"></a>请求限制
这些是单个传出请求的限制。

### <a name="timeout"></a>超时

| 名称 | 限制 |
| --- | --- |
| 请求超时 |120 秒 |

### <a name="message-size"></a>消息大小

| 名称 | 限制 | 说明 |
| --- | --- | --- |
| 消息大小 |100 MB |并非所有 API 都支持整整 100 MB。 |
| 表达式计算限制 |131072 个字符 |`@concat()`、`@base64()`、`string` 不能超过此限制。 |

### <a name="retry-policy"></a>重试策略

| 名称 | 限制 |
| --- | --- |
| 重试尝试次数 |4 |

## <a name="run-duration-and-retention"></a>运行持续时间和保留期
这些是单个流运行的限制。

| 名称 | 限制 | 说明 |
| --- | --- | --- |
| 运行持续时间 |30 天 |提供的工作流包含未完成的步骤，例如审批。 30 天后，任何挂起步骤都会超时。将从审批中心删除超时审批。 如果有人尝试批准超时请求，则会收到错误消息。 |
| 存储保留期 |30 天 |这是从运行开始时间算起。 |
| 最小重复间隔 |1 分钟 | |
| 最大重复间隔 |500 天 | |

## <a name="looping-and-debatching-limits"></a>循环和拆分限制
这些是单个流运行的限制。

| 名称 | 限制 | 说明 |
| --- | --- | --- |
| ForEach 项数 |5000 |可以使用筛选操作，根据需要筛选较大的数组。 |
| Until 迭代次数 |5000 | |
| SplitOn 项数 |5000 | |
| ForEach 并行度 |1 | |

## <a name="definition-limits"></a>定义限制
这些是单个流的限制。

| 名称 | 限制 | 说明 |
| --- | --- | --- |
| 每个工作流的操作个数 |250 |可以添加嵌套工作流，根据需要对此进行扩展。 |
| 允许的操作嵌套深度 |5 |可以添加嵌套工作流，根据需要对此进行扩展。 |
| 每个表达式的最大字符数 |8192 | |
| `action`/`trigger` 名称限制 |80 | |
| `description` 长度限制 |256 | |

## <a name="sharepoint-limits"></a>Sharepoint 限制
在将 Microsoft SharePoint 与 Microsoft Flow 和 PowerApps 配合使用时，存在使用方式上的[限制](https://powerapps.microsoft.com/tutorials/connection-sharepoint-online/)。

## <a name="ip-address-configuration"></a>IP 地址配置
发送 Microsoft Flow 请求时，所使用的 IP 地址取决于包含流的[环境](environments-overview-admin.md)所在的[区域](regions-overview.md)。 我们当前未发布可用于流方案的 FQDN。

### <a name="logic-app-service"></a>逻辑应用服务
从流中进行的调用直接通过 Azure 逻辑应用服务。 举例说来，HTTP 或 HTTP + OpenAPI 就是此类调用。 此类调用来自以下 IP 地址：

| 区域 | 出站 IP |
| --- | --- |
| 亚洲 |168.63.200.173，13.75.89.159，23.97.68.172，13.75.94.173，40.83.127.19，52.175.33.254，52.163.93.214，52.187.65.81，52.187.65.155，13.76.133.155，52.163.228.93，52.163.230.166 |
| 澳大利亚 |13.75.153.66，104.210.89.222，104.210.89.244，13.75.149.4，104.210.91.55，104.210.90.241，13.73.115.153，40.115.78.70，40.115.78.237，13.73.114.207，13.77.3.139，13.70.159.205 |
| 加拿大 |52.233.29.92, 52.228.39.241, 52.228.39.244, 52.232.128.155, 52.229.120.45, 52.229.126.25 |
| 欧洲 |13.79.173.49，52.169.218.253，52.169.220.174，40.113.12.95，52.178.165.215，52.178.166.21，13.95.155.53，52.174.54.218，52.174.49.6，40.68.222.65，40.68.209.23，13.95.147.65 |
| 印度 |52.172.157.194，52.172.184.192，52.172.191.194，52.172.154.168，52.172.186.159，52.172.185.79，52.172.9.47，52.172.49.43，52.172.51.140，52.172.50.24，52.172.55.231，52.172.52.0 |
| 日本 |13.71.146.140，13.78.84.187，13.78.62.130，13.71.158.3，13.73.4.207，13.71.158.120，40.74.140.173，40.74.81.13，40.74.85.215，40.74.140.4，104.214.137.243，138.91.26.45 |
| 美国 |137.135.106.54，40.117.99.79，40.117.100.228，13.92.98.111，40.121.91.41，40.114.82.191，52.160.90.237，138.91.188.137，13.91.252.184，52.160.92.112，40.118.244.241，40.118.241.243 |

### <a name="services"></a>服务
从通过流连接的 API（例如 SQL API 或 SharePoint API）进行的调用将来自下面指定的 IP 地址：

| 区域 | 出站 IP |
| --- | --- |
| 亚洲 |52.163.91.227、52.163.89.40、52.163.89.65、52.163.95.29、13.75.89.9、13.75.91.198、13.75.92.202、13.75.92.124 |
| 澳大利亚 |13.77.7.172、13.70.191.49、13.70.189.7、13.70.187.251、13.70.82.210、13.73.203.158、13.73.207.42、13.73.205.35 |
| 加拿大 |52.233.30.222、52.233.30.148、52.233.30.199、52.233.29.254、52.232.130.205、52.229.126.118、52.229.126.28、52.229.123.56 |
| 欧洲 |52.166.241.149、52.166.244.232、52.166.245.173、52.166.243.169、40.69.45.126、40.69.45.11、40.69.45.93、40.69.42.254 |
| 印度 |52.172.54.172、52.172.55.107、52.172.55.84、52.172.51.70、52.172.158.185、52.172.159.100、52.172.158.2、52.172.155.245 |
| 日本 |104.214.137.186、104.214.139.29、104.214.140.23、104.214.138.174、13.78.85.193、13.78.84.73、13.78.85.200、13.78.86.229 |
| 美国 |104.43.232.28、104.43.232.242、104.43.235.249、104.43.234.211、52.160.93.247、52.160.91.66、52.160.92.131、52.160.95.100、40.117.101.91、40.117.98.246、40.117.101.120、40.117.100.191 |
| 美国（提前体验） |52.161.26.191、52.161.27.42、52.161.29.40、52.161.26.33、13.66.213.240、13.66.214.51、13.66.210.166、13.66.213.29 |

例如，如果必须为 Azure SQL 数据库的 IP 地址授权，则应使用这些地址。

下表列出了 Microsoft Flow 连接到的服务。 确保所有这些服务均未在网络上被屏蔽。

域 | 协议 | 使用
--------|  ---------| -----
management.azure.com|https|对 Azure 资源管理器的访问权限。
login.microsoft.com</br>login.windows.net</br>login.microsoftonline.com</br>secure.aadcdn.microsoftonline-p.com|https|对 Active Directory 身份验证库 (ADAL) 的访问权限。
graph.microsoft.com </br>graph.windows.net</br>|https|对 Azure AD Graph API 的访问权限- 获取个人资料照片等用户信息。
*.azure-apim.net|https|对连接器运行时的访问权限。
*.flow.microsoft.com|https|对 Microsoft Flow 网站的访问权限。
*.powerapps.com|https|对 PowerApps 网站的访问权限。
psux.azureedge.net|https|对 Microsoft Flow CDN 的访问权限。
nps.onyx.azure.net|https|访问 NPS（净推荐值）。

